extends ../layout



block view

    div(ng-if='view.dialog.overlay=="tag"', ng-controller='ContentTagDialogCtrl', ng-init='state=view.dialog.state')

        .row: .col-12.dialog--head.info(ng-class="{'primary':'none'==state}")
            i.icon-share-alt
            span  Сервер

        .row: .col-12.dialog--body

            .row: .col-12.col-sm-12.col-lg-10.col-offset-1
                form(name='TagForm')
                    fieldset
                        input.input(placeholder='Name', type='text', required, ng-maxlength='50', ng-model='tag.name')


                    fieldset: .row
                        .col-6
                            input.input(placeholder='В единственном числе', type='text', ng-maxlength='50', ng-model='tag.titleRuSingular')
                        .col-6
                            input.input(placeholder='Во множественном', type='text', ng-maxlength='50', ng-model='tag.titleRuPlural')


                    fieldset: .row
                        .col-6
                            input.input(placeholder='Singular', type='text', ng-maxlength='50', ng-model='tag.titleEnSingular')
                        .col-6
                            input.input(placeholder='Plural', type='text', ng-maxlength='50', ng-model='tag.titleEnPlural')


                    fieldset
                        .row
                            .col-10
                                select.input(ng-model='parentTag')
                                    option(ng-repeat='parentTag in tags | filter:filterTag: parentTag', value='{{parentTag}}') {{parentTag.name}} ({{parentTag.titleRuSingular}})
                            .col-1
                                button.btn(ng-click='addTag(parentTag)',ng-disabled='!parentTag')
                                    i.icon-plus

                        .row(ng-repeat='tagTag in tag.parentTags')
                            .col-3 {{tagTag.name}}
                            .col-1
                                button.btn(ng-click='removeTag(tagTag)')
                                    i.icon-minus


                    fieldset(ng-if='action=="create"')
                        button.btn.btn-primary.btn-block(type='submit', ng-click='create()', ng-disabled='!TagForm.$valid')
                            span Создать тег

                    fieldset(ng-if='action=="update"'): .row
                        .col-10
                            button.btn.btn-primary.btn-block(type='submit',ng-click='update()',ng-disabled='!TagForm.$valid')
                                span Обновить тег
                        .col-2
                            button.btn.btn-link.btn-block.text-left(ng-click='delete()')
                                span Удалить
